<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      type="text/css"
      href="../blogdb/blogfullstackapp.css"
    />
    <title>Date Night - Mate Night</title>
  </head>
  <script>
    async function postUser() {
      let fn = document.getElementById("firstname").value;
      let ln = document.getElementById("lastname").value;
      let un = document.getElementById("username").value;
      let pw = document.getElementById("password").value;
      let emailadd = document.getElementById("email").value;

      const response = await fetch("http://localhost:3000/user", {
        method: "POST", // *GET, POST, PUT, DELETE, etc.
        headers: {
          "Content-Type": "application/json"
          // 'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: JSON.stringify({
          firstname: fn,
          lastname: ln,
          username: un,
          password: pw,
          emailaddress: emailadd
        }) // body data type must match "Content-Type" header
      });
      console.log(await response.json()); // parses JSON response into native JavaScript objects
    }

//GETUSERS
    async function getAllUsers(){
      var myHeaders = new Headers();
myHeaders.append("Content-Type", "application/json");
var requestOptions = {
  method: 'GET',
  headers: {
          "Content-Type": "application/json"
        },
};

fetch("http://localhost:3000/users/", requestOptions)
  .then(response => response.text())
  .then(result => document.getElementById("allUsers").innerHTML = result);
}

//GETUSER
async function getUserProfile(){
      var myHeaders = new Headers();
myHeaders.append("Content-Type", "application/json");
var requestOptions = {
  method: 'GET',
  headers: {
          "Content-Type": "application/json"
        },
};

fetch("http://localhost:3000/user", requestOptions)
  .then(response => response.text())
  .then(result => console.log(result));
}





    /*async function deleteUser() {
      let fn = document.getElementById("firstname").value;
      let ln = document.getElementById("lastname").value;
      let un = document.getElementById("username").value;
      let pw = document.getElementById("password").value;
      let emailadd = document.getElementById("email").value;

      const response = await fetch(`http://localhost:3000/user`, {
        method: "DELETE",
        headers: {
          "Content-Type": "application/json"
        }
      }).then(response => response.json());
      console.log();
    }
*/

//CSS


  </script>
  <body>
    <div class="top-bar">
      <h1 id="page-title">Date Night Mate Night</h1>
      <div class = "sign-in-pop-up" id ="pop-up">
      <form action="/users" class="form-container">
        <label for="user-name">
        <strong>User Name</strong>
        </label>
        <input type="text" placeholder="Username" name="username" required>
        <label for="pw">
        <strong>Password</strong>
        </label>
        <input type="password" placeholder="Password" name="pw" required>
        <button type="button" id="sign-in" onclick = getUserProfile()>Sign In</button>

      </form>
    </div>


      <button type="button" id="top-picks" onclick = >Top Picks</button>
      <button type="button" id ="connect" onclick = getAllUsers()>Connect with Friends!</button>
    </div>
    <p>
      Twiddling your thumbs, thinking about what to do on a Friday night with
      your spouse or best mate? Check out all the cool stuff London has to offer
      to make the perfect day or night out! Real people, real reviews, real fun.
    </p>
    <div class="new-user-form">
      <form action="/user" method="POST">
        <ul>
          <li>
            <label for="first-name">First Name:</label>
            <input type="text" id="firstname" required />
          </li>
          <li>
            <label for="last-name">Last Name:</label>
            <input type="text" id="lastname" required />
          </li>
          <li>
            <label for="user-name">User Name:</label>
            <input type="text" id="username" required />
          </li>
          <li>
            <label for="password">Password:</label>
            <input type="text" id="password" required />
          </li>
          <li>
            <label for="email">Email Address:</label>
            <input type="text" id="email" required />
          </li>
        </ul>
      </form>
    </div>
<div id = "allUsers">
  <h2></h2>
</div>


    <button class="button" type="submit" onclick="postUser()">
      Create Profile
    </button>

    <button class="button" type="submit" onclick="deleteUser()">
      Unsubscribe
    </button>
  </body>
</html>
    